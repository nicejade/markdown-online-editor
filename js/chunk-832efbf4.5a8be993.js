(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-832efbf4"],{"0712":function(t,e,i){},"9dc0":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"preview-vditor",attrs:{"element-loading-text":"正在努力，请稍候..."}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"vditor-preview",attrs:{id:"khaleesi"}})])},o=[],a=i("e6bc"),r=i.n(a),s={name:"PreviewVditor",data:function(){return{isLoading:!0}},props:{pdata:{type:String,required:!0,default:""}},created:function(){this.$utils.updateHtmlStyle(),this.setDefaultText()},components:{},mounted:function(){this.initVditor(),this.$utils.hideVditorTextarea()},methods:{initVditor:function(){var t=this,e={width:"61.8%",mode:"sv",preview:{delay:1e3,show:!0}};this.vditor=new r.a("khaleesi",e),this.$nextTick((function(){t.isLoading=!1}))},setDefaultText:function(){localStorage.setItem("vditorkhaleesi",this.pdata)}}},d=s,c=(i("f227"),i("0c7c")),l=Object(c["a"])(d,n,o,!1,null,null,null);e["a"]=l.exports},"9dd8":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"export-page"},[e("div",{staticClass:"button-group"},[e("el-button",{attrs:{round:""},on:{click:t.onBackToMainPage}},[t._v("返回主页")]),e("el-button",{attrs:{round:"",type:"primary",disabled:t.exporting},on:{click:t.onExportBtnClick}},[t._v("\n      "+t._s(t.exporting?"正在导出...":"生成导出")+"\n    ")])],1),e("PreviewVditor",{attrs:{pdata:t.pdata}})],1)},o=[],a=i("d67e"),r=i.n(a),s=i("9dc0"),d={name:"export-pdf",data:function(){return{isLoading:!0,pdata:localStorage.getItem("vditorvditor"),exporting:!1}},created:function(){},components:{PreviewVditor:s["a"]},mounted:function(){},methods:{exportAndDownloadPdf:function(t,e){var i=this,n=window.devicePixelRatio,o={margin:1,filename:e,html2canvas:{scale:n,useCORS:!0,logging:!1,scrollY:0,scrollX:0,ignoreElements:function(t){return t.classList.contains("vditor-preview__action")}},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};r()().set(o).from(t).save().then((function(){i.isLoading=!1,i.exporting=!1})).catch((function(t){console.error("PDF导出失败:",t),i.isLoading=!1,i.exporting=!1,i.$message.error("PDF导出失败，请重试")}))},onBackToMainPage:function(){this.$router.push("/")},onExportBtnClick:function(){this.isLoading=!0,this.exporting=!0;var t=document.querySelector("#khaleesi .vditor-preview"),e=this.$utils.getExportFileName();this.exportAndDownloadPdf(t||document.querySelector("#khaleesi"),e)}}},c=d,l=i("0c7c"),u=Object(l["a"])(c,n,o,!1,null,null,null);e["default"]=u.exports},f227:function(t,e,i){"use strict";i("0712")}}]);