(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75d53a76"],{"89df":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c}));n("28a5"),n("a481"),n("f559");"function"!==typeof String.prototype.startsWith&&(Window.String.prototype.startsWith=function(t){return this.slice(0,t.length)===t});var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t<10?"0".concat(t):t},o=function(){var t=new Date,e="".concat(t.getFullYear()).replace("20",""),n=i(t.getMonth()+1),o=i(t.getDate()),a=i(t.getHours()),r=i(t.getMinutes()),c=i(t.getSeconds());return"".concat(e,"-").concat(n,"-").concat(o,"-").concat(a).concat(r).concat(c)},a=function(){var t=location.pathname.split("/")[0],e=o(),n="arya-".concat(e,".").concat(t);return n},r=function(){var t=document.querySelector("html");t.style.overflow="auto",t.style.height="auto"},c=function(){var t=document.getElementById("khaleesi"),e={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeFilter:["class","style"],attributeOldValue:!0,characterDataOldValue:!0},n=new MutationObserver((function(){var t=document.getElementsByClassName("vditor-textarea");t&&t[0]&&(t[0].style.display="none",n.disconnect())}));n.observe(t,e)}},"9dc0":function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"preview-vditor",attrs:{"element-loading-text":"正在努力，请稍候..."}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"vditor-preview",attrs:{id:"khaleesi"}})])},o=[],a=n("e6bc"),r=n.n(a),c=(n("ae60"),n("89df")),s={name:"PreviewVditor",data:function(){return{isLoading:!0}},props:{pdata:{type:String,required:!0,default:""}},created:function(){Object(c["c"])(),this.setDefaultText()},components:{},mounted:function(){this.initVditor(),Object(c["b"])()},methods:{initVditor:function(){var t=this,e={width:"61.8%",mode:"sv",preview:{delay:1e3,show:!0}};this.vditor=new r.a("khaleesi",e),this.$nextTick((function(){t.isLoading=!1}))},setDefaultText:function(){localStorage.setItem("vditorkhaleesi",this.pdata)}}},u=s,d=(n("af34"),n("0c7c")),l=Object(d["a"])(u,i,o,!1,null,null,null);e["a"]=l.exports},"9dd8":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"export-page"},[e("div",{staticClass:"button-group"},[e("el-button",{attrs:{round:""},on:{click:t.onBackToMainPage}},[t._v("返回主页")]),e("el-button",{attrs:{round:"",type:"primary",disabled:t.exporting},on:{click:t.onExportBtnClick}},[t._v("\n      "+t._s(t.exporting?"正在导出...":"生成导出")+"\n    ")])],1),e("PreviewVditor",{attrs:{pdata:t.pdata}})],1)},o=[],a=n("d67e"),r=n.n(a),c=n("9dc0"),s=n("89df"),u=n("b5e2"),d=n("08fe"),l={name:"export-pdf",data:function(){return{isLoading:!0,pdata:Object(u["getDocContent"])(Object(u["getActiveDocId"])())||"",exporting:!1}},created:function(){},components:{PreviewVditor:c["a"]},mounted:function(){},methods:{exportAndDownloadPdf:function(t,e){var n=this,i=window.devicePixelRatio,o={margin:1,filename:e,html2canvas:{scale:i,useCORS:!0,logging:!1,scrollY:0,scrollX:0,ignoreElements:function(t){return t.classList.contains("vditor-preview__action")}},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};r()().set(o).from(t).save().then((function(){n.isLoading=!1,n.exporting=!1})).catch((function(t){console.error("PDF导出失败:",t),n.isLoading=!1,n.exporting=!1,n.$message.error("PDF导出失败，请重试")}))},onBackToMainPage:function(){this.$router.push("/")},onExportBtnClick:function(){this.isLoading=!0,this.exporting=!0;var t=document.querySelector("#khaleesi .vditor-preview"),e=Object(s["a"])();this.exportAndDownloadPdf(t||document.querySelector("#khaleesi"),e),Object(d["a"])("export_pdf_submit","export",e)}}},f=l,p=n("0c7c"),v=Object(p["a"])(f,i,o,!1,null,null,null);e["default"]=v.exports},af34:function(t,e,n){"use strict";n("c370")},c370:function(t,e,n){}}]);